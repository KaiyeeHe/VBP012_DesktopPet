# 🐆 金钱豹桌面宠物

一只帮你进钱的桌面金钱豹！通过番茄工作法和定时运动提醒，帮助你保持专注和健康。

## ✨ 特性

- 🍅 **番茄工作法**：可自定义工作和休息时间
- 💪 **运动提醒**：60+ 种创意运动动作，保护颈椎、肩背、手腕等
- 💰 **打卡奖励**：完成运动获得虚拟金币奖励
- 📊 **数据统计**：记录每日打卡数据和完成率
- 🎯 **桌面悬浮**：始终置顶，支持拖拽移动
- 🔍 **智能穿透**：非交互区域自动穿透鼠标事件
- 🎨 **可爱交互**：点击宠物、动画效果、表情变化

## 🖥️ 技术栈

- **Electron**: 跨平台桌面应用框架
- **原生 HTML/CSS/JS**: 无依赖的纯前端实现
- **localStorage**: 本地数据持久化

## 📁 项目结构

```
VBP012_desktop_pet/
├── main.js              # Electron 主进程
├── index.html           # 应用界面（包含所有样式和逻辑）
├── package.json         # 项目配置
├── dist/                # 打包输出目录
│   └── mac/
│       └── money-leopard-pet.app
└── node_modules/        # 依赖包
```

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式运行

```bash
npm start
```

### 打包应用

```bash
# 打包到 dist/mac/ 目录（不创建安装包）
npm run pack

# 完整打包（可能创建 DMG 文件）
npm run dist
```

打包完成后，应用程序位于 `dist/mac/money-leopard-pet.app`

### 运行打包后的应用

```bash
open dist/mac/money-leopard-pet.app
```

## 🎮 使用说明

### 基本操作

- **拖拽移动**：点击金钱豹或状态栏拖拽移动窗口
- **点击互动**：点击金钱豹会显示爱心和表情变化
- **说句话**：点击💬按钮，金钱豹会随机说话
- **暂停/继续**：点击❚❚按钮暂停或继续计时
- **重新开始**：点击↻按钮重启当前工作周期

### 设置

点击⚙️按钮打开设置面板：
- **工作时间**：1-120 分钟（默认 10 分钟）
- **休息时间**：10-300 秒（默认 30 秒）

### 数据统计

点击📊按钮查看：
- 每日打卡记录
- 完成的运动动作
- 打卡成功率

### 打卡流程

1. **工作时段**：专注工作，倒计时结束后进入休息
2. **休息时段**：金钱豹会推荐一个运动动作
3. **完成运动**：点击"💰 打卡进钱💰"按钮获得奖励
4. **补打卡**：如果错过打卡，可以点击✅按钮手动确认

### 快捷键

- **⌘Q** 或 **Ctrl+Q**：退出应用

## 🏗️ 架构设计

### 主进程（main.js）

- 创建透明无边框窗口
- 处理窗口拖拽移动
- 控制鼠标穿透状态
- 管理窗口在所有桌面显示

### 渲染进程（index.html）

**核心功能模块**：

1. **状态管理**：工作/休息状态、计时器、打卡状态
2. **运动库**：60+ 种运动动作，覆盖全身各部位
3. **数据持久化**：localStorage 存储设置和打卡记录
4. **交互系统**：
   - 拖拽移动
   - 点击互动
   - 动画效果
   - 气泡提示

**样式特点**：

- 纯白不透明状态栏设计
- 旗帜式右上角按钮
- 模态弹窗（设置、数据、确认）
- 丰富的 CSS 动画（起飞、摇摆、弹跳等）

## 🎨 运动库分类

应用内置 60+ 种运动动作，分为以下类别：

- 🦒 **颈部/头部**：天鹅颈、仰望金币、侧耳听钱等
- 🦅 **肩背/上肢**：耸肩藏金、扩胸纳财、大鹏展翅等
- 👐 **手部/手腕**：招财猫手、数钱抽筋、金刚铁拳等
- 💃 **腰腹/核心**：捡钱弯腰、转运呼啦圈、侧身拿钱等
- 🍑 **臀部/髋部**：夹紧钱包、二郎腿克星等
- 🦶 **腿部/脚部**：步步高升、踮脚望远、脚踝画圈等
- 👀 **眼睛/面部**：股市大盘、寻找商机、狮子开口等

## ⚙️ 配置说明

### package.json 构建配置

```json
{
  "build": {
    "appId": "com.moneyleopard.pet",
    "productName": "🐆金钱豹",
    "compression": "maximum",
    "asar": true,
    "mac": {
      "target": {
        "target": "dir",
        "arch": ["x64"]
      },
      "category": "public.app-category.productivity",
      "minimumSystemVersion": "10.13.0",
      "electronLanguages": ["zh_CN"]
    }
  }
}
```

### 窗口配置（main.js）

- **尺寸**：340x550
- **类型**：panel（浮动面板）
- **特性**：透明、无边框、无阴影、始终置顶
- **权限**：允许在所有桌面和全屏显示

## 📊 数据存储

应用使用 `localStorage` 存储以下数据：

1. **petSettings**：用户设置
   ```json
   {
     "workTimeMinutes": 10,
     "restTimeSeconds": 30
   }
   ```

2. **petHistory**：打卡记录
   ```json
   [
     {
       "date": "2025-12-01",
       "sessions": [
         {
           "time": "10:30:00",
           "checkedIn": true,
           "activity": "天鹅颈"
         }
       ]
     }
   ]
   ```

## 🔧 开发注意事项

### IPC 通信

主进程和渲染进程通过以下 IPC 通道通信：

- `window-move`：移动窗口
- `set-click-through`：控制鼠标穿透
- `window-reset`：重置窗口位置
- `quit-app`：退出应用

### 鼠标穿透逻辑

应用实现了智能穿透：
- 鼠标在交互区域（金钱豹、状态栏、气泡、弹窗）时：可交互
- 鼠标在透明区域时：穿透到下层窗口
- 拖拽或弹窗打开时：禁用穿透

## 🐛 已知问题

- macOS 上需要手动授予辅助功能权限才能正常拖拽
- 窗口大小固定，不支持缩放

## 📝 更新日志

查看 [更新说明.md](./更新说明.md) 了解版本历史

## 📄 许可证

ISC

## 👨‍💻 作者

YourName

---

**让金钱豹陪你一起进钱吧！** 💰🐆
